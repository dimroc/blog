<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!--iPhone preview -->
  <meta property="og:title" content="Rails and Angular without the SPA" />
  <meta property="og:image" content="/" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Rails and Angular without the SPA &middot; dimroc
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/tagging.css">
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/custom.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Javascript -->
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script src="/public/javascript/detectmobilebrowser.js"></script>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  <meta name="google-site-verification" content="KFJOcbe4F4sAQcx11yd_6hmxu0DVdy6ZgI7y6TFK8VU" />
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43559997-2', 'auto');
  ga('send', 'pageview');
</script>

</head>


  <body class="sidebar-overlay">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Blog</a>
    <a class="sidebar-nav-item" href="https://github.com/dimroc">GitHub</a>
    <a class="sidebar-nav-item" href="https://experiments.dimroc.com">Experiments</a>

    

    
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    <a class="sidebar-nav-item" href="https://twitter.com/dimroc">@dimroc</a>
  </nav>

  <div class="sidebar-item">
    <p>Tags</p>
  </div>

  <nav class="sidebar-nav">
    
    
      <a class="sidebar-nav-item" href=/tag/webgl/>webgl</a>
    
      <a class="sidebar-nav-item" href=/tag/javascript/>javascript</a>
    
      <a class="sidebar-nav-item" href=/tag/twitter/>twitter</a>
    
      <a class="sidebar-nav-item" href=/tag/nyc/>nyc</a>
    
      <a class="sidebar-nav-item" href=/tag/elasticsearch/>elasticsearch</a>
    
      <a class="sidebar-nav-item" href=/tag/ios/>ios</a>
    
      <a class="sidebar-nav-item" href=/tag/ruby/>ruby</a>
    
      <a class="sidebar-nav-item" href=/tag/elixir/>elixir</a>
    
      <a class="sidebar-nav-item" href=/tag/golang/>golang</a>
    
      <a class="sidebar-nav-item" href=/tag/scala/>scala</a>
    
      <a class="sidebar-nav-item" href=/tag/etl/>etl</a>
    
      <a class="sidebar-nav-item" href=/tag/swift/>swift</a>
    
      <a class="sidebar-nav-item" href=/tag/testing/>testing</a>
    
      <a class="sidebar-nav-item" href=/tag/rails/>rails</a>
    
      <a class="sidebar-nav-item" href=/tag/python/>python</a>
    
      <a class="sidebar-nav-item" href=/tag/business/>business</a>
    
      <a class="sidebar-nav-item" href=/tag/go/>go</a>
    
      <a class="sidebar-nav-item" href=/tag/docker/>docker</a>
    
      <a class="sidebar-nav-item" href=/tag/react/>react</a>
    
      <a class="sidebar-nav-item" href=/tag/tutum/>tutum</a>
    
      <a class="sidebar-nav-item" href=/tag/aws/>aws</a>
    
      <a class="sidebar-nav-item" href=/tag/machine-learning/>machine-learning</a>
    
      <a class="sidebar-nav-item" href=/tag/angular/>angular</a>
    
      <a class="sidebar-nav-item" href=/tag/finance/>finance</a>
    
      <a class="sidebar-nav-item" href=/tag/books/>books</a>
    
      <a class="sidebar-nav-item" href=/tag/octave/>octave</a>
    
      <a class="sidebar-nav-item" href=/tag/kubernetes/>kubernetes</a>
    
      <a class="sidebar-nav-item" href=/tag/coreml/>coreml</a>
    
      <a class="sidebar-nav-item" href=/tag/ml/>ml</a>
    
      <a class="sidebar-nav-item" href=/tag/games/>games</a>
    
      <a class="sidebar-nav-item" href=/tag/ai/>ai</a>
    
      <a class="sidebar-nav-item" href=/tag/genai/>genai</a>
    
      <a class="sidebar-nav-item" href=/tag/godot/>godot</a>
    
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2023. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h2 class="masthead-title">
            <a href="/" title="Home">dimroc</a>
            <small>blog</small>
            <span class="masthead-links">
              <a href="https://experiments.dimroc.com" title="Experiments">See Experiments</a>
            </span>
          </h2>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Rails and Angular without the SPA</h1>
  <span class="post-date">23 Jan 2016</span>
  <span class="post-comments"><a href="#disqus_thread"></a></span>
  <p>A full on Angular single page application (SPA) is overkill 90% of the time.
This article will illustrate a simple way to get the rich user experience from
javascript while still relying on Rails server rendering for the bulk of the application.</p>

<p>Our approach advocates the following philosophy:</p>

<blockquote>
  <p>Javascript and angular functionality exists to enrich the user experience of existing server-side rendered pages.</p>
</blockquote>

<p>This is based on the premise that only a handful of pages actually
need javascript functionality. Most of your pages are happily being rendered server side,
but there’s that one page that needs sophisticated user experience (UX). For example, you might have
a master-detail page, and want AJAX requests to fill the detail without navigating to a new page.</p>

<h2 id="setting-up-angular-with-rails">Setting up Angular with Rails</h2>

<p>I recommend using <a href="https://github.com/rharriso/bower-rails">bower-rails</a> to manage client side dependencies like Angular.
You will need to install bower, please go to <a href="https://github.com/rharriso/bower-rails">bower-rails</a> for more details if unfamiliar.</p>

<h4 id="bowerfile"><code class="language-plaintext highlighter-rouge">Bowerfile</code></h4>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># A sample Bowerfile</span>
<span class="c1"># Check out https://github.com/42dev/bower-rails#ruby-dsl-configuration for more options</span>

<span class="n">asset</span> <span class="s1">'angular'</span><span class="p">,</span> <span class="s1">'~&gt; 1.4.8'</span></code></pre></figure>

<p>Pull down the client side dependencies</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">rake bower:install bower:clean</code></pre></figure>

<h4 id="then-add-js-files-to-applicationjs">Then add .js files to <code class="language-plaintext highlighter-rouge">application.js</code></h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//= require angular/angular</span></code></pre></figure>

<p>Setup is done.</p>

<h3 id="working-with-turbolinks">Working With Turbolinks</h3>

<p>If you’re using Turbolinks (you should), you’ll need to bootstrap
the angular application on every Turbolinks page load.</p>

<p>I recommend creating an <code class="language-plaintext highlighter-rouge">initializer.js</code> file with the following:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// On turbolinks load:</span>
<span class="nf">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ready page:load</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">angular</span><span class="p">.</span><span class="nf">bootstrap</span><span class="p">(</span><span class="dl">'</span><span class="s1">body</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">ltApp</span><span class="dl">'</span><span class="p">])</span>
<span class="p">});</span></code></pre></figure>

<p>This callback will bootstrap angular on every turbolinks page navigation.</p>

<h2 id="angular-directives-and-controllers">Angular Directives and Controllers</h2>

<p>With all our setup done, we can now add Angular functionality to our pages.</p>

<p>There are two main ways to do this:</p>

<ol>
  <li>Angular Controllers
    <ul>
      <li>Useful when adding page specific functionality</li>
    </ul>
  </li>
  <li>Angular Directives
    <ul>
      <li>Useful when creating reusable widgets, such as a HTML 5 video player, that can be reused across pages.</li>
    </ul>
  </li>
</ol>

<h2 id="angular-controllers">Angular Controllers</h2>

<p>Angular let’s you tag DOM elements with <code class="language-plaintext highlighter-rouge">ng-controller</code> to associate javascript functionality with
a particular page. The key word below being <code class="language-plaintext highlighter-rouge">UserCountsChartCtrl</code>:</p>

<h4 id="usersindexhamlhtml"><code class="language-plaintext highlighter-rouge">users/index.haml.html</code></h4>

<figure class="highlight"><pre><code class="language-haml" data-lang="haml"><span class="nc">.graphs</span><span class="p">{</span><span class="s2">"ng-controller"</span> <span class="o">=&gt;</span> <span class="s2">"UserCountsChartCtrl"</span><span class="p">}</span>
  <span class="nc">.hidden.graph-data</span><span class="p">{</span><span class="ss">data: </span><span class="p">{</span> <span class="s1">'graph-data'</span> <span class="o">=&gt;</span> <span class="vi">@weekly_data</span><span class="p">.</span><span class="nf">to_json</span><span class="p">}</span> <span class="p">}</span>
  <span class="nc">.row</span>
    <span class="nc">.col-md-12</span>
      <span class="nt">%canvas</span><span class="nc">.chart.chart-bar</span><span class="p">{</span><span class="ss">data: </span><span class="s2">"barGraph.data"</span><span class="p">,</span> <span class="ss">labels: </span><span class="s2">"barGraph.labels"</span><span class="p">,</span> <span class="ss">series: </span><span class="s2">"barGraph.series"</span><span class="p">,</span> <span class="ss">options: </span><span class="s2">"barGraph.options"</span><span class="p">}</span></code></pre></figure>

<h4 id="javacsriptsngcontrollersusercountschartctrljs"><code class="language-plaintext highlighter-rouge">javacsripts/ng/controllers/UserCountsChartCtrl.js</code></h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">angular</span><span class="p">.</span><span class="nf">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">ltApp</span><span class="dl">'</span><span class="p">).</span>
  <span class="nf">controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">UserCountsChartCtrl</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">$scope</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">$element</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$element</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">labels</span> <span class="o">=</span> <span class="nx">$element</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.graph-data</span><span class="dl">'</span><span class="p">).</span><span class="nf">data</span><span class="p">(</span><span class="dl">"</span><span class="s2">graph-data</span><span class="dl">"</span><span class="p">).</span><span class="nx">dates</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">$element</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.graph-data</span><span class="dl">'</span><span class="p">).</span><span class="nf">data</span><span class="p">(</span><span class="dl">"</span><span class="s2">graph-data</span><span class="dl">"</span><span class="p">).</span><span class="nx">user_counts</span><span class="p">;</span>

    <span class="c1">// bar graph</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">barGraph</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">labels</span><span class="p">:</span> <span class="nx">labels</span><span class="p">,</span>
      <span class="na">series</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">User Counts</span><span class="dl">"</span><span class="p">],</span>
      <span class="na">data</span><span class="p">:</span> <span class="p">[</span><span class="nx">data</span><span class="p">],</span>
      <span class="na">options</span><span class="p">:</span> <span class="p">{</span> <span class="na">responsive</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">maintainAspectRatio</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}]);</span></code></pre></figure>

<p>Here I am drawing bar charts on the index page using <a href="http://www.chartjs.org/">Charts.js</a> with an Angular Controller.</p>

<h3 id="passing-data-from-server-side-to-client-side">Passing data from server side to client side</h3>
<p>One often needs to get information to the javascript client. In a typical SPA, this
is done with a subsequent AJAX call. Here we save that AJAX call and just render the information
in <code class="language-plaintext highlighter-rouge">data</code> HTML attributes. Notice the lines below:</p>

<figure class="highlight"><pre><code class="language-haml" data-lang="haml"><span class="nc">.graphs</span><span class="p">{</span><span class="s2">"ng-controller"</span> <span class="o">=&gt;</span> <span class="s2">"UserCountsChartCtrl"</span><span class="p">}</span>
  <span class="nc">.hidden.graph-data</span><span class="p">{</span><span class="ss">data: </span><span class="p">{</span> <span class="s1">'graph-data'</span> <span class="o">=&gt;</span> <span class="vi">@weekly_data</span><span class="p">.</span><span class="nf">to_json</span><span class="p">}</span> <span class="p">}</span>
  ....</code></pre></figure>

<h4 id="javacsriptsngcontrollersusercountschartctrljs-1"><code class="language-plaintext highlighter-rouge">javacsripts/ng/controllers/UserCountsChartCtrl.js</code></h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">angular</span><span class="p">.</span><span class="nf">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">ltApp</span><span class="dl">'</span><span class="p">).</span>
  <span class="nf">controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">UserCountsChartCtrl</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">$scope</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">$element</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$element</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">labels</span> <span class="o">=</span> <span class="nx">$element</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.graph-data</span><span class="dl">'</span><span class="p">).</span><span class="nf">data</span><span class="p">(</span><span class="dl">"</span><span class="s2">graph-data</span><span class="dl">"</span><span class="p">).</span><span class="nx">dates</span><span class="p">;</span> <span class="c1">// pull data</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">$element</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.graph-data</span><span class="dl">'</span><span class="p">).</span><span class="nf">data</span><span class="p">(</span><span class="dl">"</span><span class="s2">graph-data</span><span class="dl">"</span><span class="p">).</span><span class="nx">user_counts</span><span class="p">;</span>
    <span class="p">...</span></code></pre></figure>

<p>This allows you to leverage Rails (controllers, presenters, etc) to present the data needed by the javascript client side.</p>

<h2 id="angular-directives">Angular Directives</h2>

<p><a href="https://docs.angularjs.org/guide/directive">Angular Directives</a> allow you to create
javascript functionality that is cross cutting. The example below is ensures that
a form can only be submitted once, to stop those pesky double click submissions.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">angular</span><span class="p">.</span><span class="nf">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">ltApp</span><span class="dl">'</span><span class="p">).</span>
    <span class="nf">directive</span><span class="p">(</span><span class="dl">'</span><span class="s1">ltSingleSubmit</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nf">function </span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="dl">"</span><span class="s2">submit</span><span class="dl">"</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">element</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">input[type='submit']</span><span class="dl">"</span><span class="p">).</span><span class="nf">prop</span><span class="p">(</span><span class="dl">'</span><span class="s1">disabled</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">};</span>
    <span class="p">});</span></code></pre></figure>

<p>This can now be easily used in any form:</p>

<figure class="highlight"><pre><code class="language-haml" data-lang="haml">  <span class="p">=</span> <span class="n">simple_form_for</span> <span class="vi">@build</span><span class="p">,</span> <span class="ss">url: </span><span class="n">build_path</span><span class="p">(</span><span class="vi">@build</span><span class="p">),</span> <span class="ss">html: </span><span class="p">{</span> <span class="s2">"lt-single-submit"</span> <span class="o">=&gt;</span> <span class="s1">''</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">input</span> <span class="ss">:name</span>
    <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">submit</span> <span class="s1">'Save'</span></code></pre></figure>

<h3 id="relying-on-server-side-rendering">Relying on Server Side Rendering</h3>

<p>When making hybrid applications like this, it’s easy to get server side
and client side rendering jumbled together. I advocate always using server side rendering.
Sure it’s less flashy, but it’s more productive and consolidates your validations into one place.</p>

<p>I’ve done this many ways. We’ll start with the simplest: Angular $http GETs.</p>

<h3 id="ajax-with-angular-http">AJAX with Angular $http</h3>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">angular</span><span class="p">.</span><span class="nf">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">ltApp</span><span class="dl">'</span><span class="p">).</span>
  <span class="nf">controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">MarketingShowCtrl</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">$scope</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">$element</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">$http</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">turbosafe</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$element</span><span class="p">,</span> <span class="nx">$http</span><span class="p">,</span> <span class="nx">turbosafe</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">$element</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">.cta</span><span class="dl">"</span><span class="p">).</span><span class="nf">data</span><span class="p">(</span><span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// Get the path for the GET form the data attribute.</span>

    <span class="c1">// Angular Scope has method fetchCollection used by ng-click.</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">fetchCollection</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">collectionName</span><span class="p">,</span> <span class="nx">direction</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Start Turbolinks progress bar even though we're using Angular!</span>
      <span class="nx">turbosafe</span><span class="p">.</span><span class="nf">start</span><span class="p">();</span>

      <span class="nx">$http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="p">{</span><span class="na">params</span><span class="p">:</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="nx">collectionName</span><span class="p">,</span> <span class="na">direction</span><span class="p">:</span> <span class="nx">direction</span><span class="p">}}).</span>
        <span class="nf">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">newDom</span> <span class="o">=</span> <span class="nf">$</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
          <span class="c1">// Replace DOM element with Server Side rendered HTML.</span>
          <span class="nx">$element</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">#top</span><span class="dl">"</span><span class="p">).</span><span class="nf">replaceWith</span><span class="p">(</span><span class="nx">newDom</span><span class="p">);</span>
          <span class="nx">turbosafe</span><span class="p">.</span><span class="nf">stop</span><span class="p">();</span>
        <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nf">warn</span><span class="p">(</span><span class="dl">"</span><span class="s2">Unable to retrieve collection</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
          <span class="nx">turbosafe</span><span class="p">.</span><span class="nf">stop</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">};</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-haml" data-lang="haml"><span class="p">=</span> <span class="n">link_to</span> <span class="s2">"Next Collection"</span><span class="p">,</span> <span class="s2">"#"</span><span class="p">,</span> <span class="s2">"ng-click"</span> <span class="o">=&gt;</span> <span class="s1">'fetchCollection("$50", "Next")'</span></code></pre></figure>

<h3 id="ajax-with-remote-forms">AJAX with Remote Forms</h3>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">angular</span><span class="p">.</span><span class="nf">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">ltApp</span><span class="dl">'</span><span class="p">).</span>
  <span class="nf">controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">AccessTokenCtrl</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">$scope</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">$element</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$element</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle remote forms success.</span>
    <span class="nx">$element</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajax:success</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$element</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">#access_token</span><span class="dl">"</span><span class="p">).</span><span class="nf">html</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">html</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}]);</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-haml" data-lang="haml"><span class="nc">.panel-body</span>
  <span class="nc">.row</span>
    <span class="nc">.col-md-12</span><span class="p">{</span> <span class="s2">"ng-controller"</span> <span class="o">=&gt;</span> <span class="s2">"AccessTokenCtrl"</span><span class="p">}</span>
      <span class="nt">%h3</span><span class="nc">.col-header</span>
      <span class="nf">#access_token</span><span class="p">=</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">live_access_token</span>
      <span class="p">-</span> <span class="c1"># Notice the remote: true to show Rails remote forms.</span>
      <span class="p">=</span> <span class="n">simple_form_for</span><span class="p">(</span><span class="vi">@user</span><span class="p">,</span> <span class="ss">url: </span><span class="n">generate_access_token_account_path</span><span class="p">(</span><span class="ss">mode: :live</span><span class="p">),</span> <span class="ss">remote: </span><span class="kp">true</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
        <span class="p">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">button</span> <span class="ss">:button</span> <span class="k">do</span>
          <span class="nt">%span</span><span class="nc">.glyphicon.glyphicon-refresh</span></code></pre></figure>

<h2 id="wrap-up">Wrap up</h2>

<p>You’re right, I got carried away at the end. But now you have an exhaustive set of examples
that show how a sprinkle of Angular can breathe rich interactivity into your Rails rendered pages.</p>

<p>Enjoy!</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2023/06/11/game-to-video-w-genai/">
            Game to Video: Using Generative AI to Uprender Gameplay
            <small>11 Jun 2023</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2019/12/31/books-worth-reading-2019/">
            Books Worth Reading 2019
            <small>31 Dec 2019</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2018/12/31/books-worth-reading-2018/">
            Books Worth Reading 2018
            <small>31 Dec 2018</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'dimroc'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'dimroc'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>


  </body>
</html>
